<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binance Trade Calculator - Daohoangdhh</title>
<head>


    <style>
        body{
            background: rgb(0, 0, 0);
            color: white;
        }
        .header{
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            padding: 15px;
            display: block;
            
        }
        .headtext{
    border:1px solid white;
    display:flex;
        }
        .trigia{
            text-align: center;
    min-height: 50px;
    display: flex;
    width: 100%;
        }
        .trigia #showgiavnd{
    flex: 1;
    text-align: center;
    font-size: 25px;
    padding: 10px;
    font-weight: bold;
    color: #6cff72;
    align-self: center;
        }
        .trigia .showtigia{
            align-self: center;
        }
        ul{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        input{
    font-size: 16px;
    font-weight: bold;
        }
        input.inputgia{
            width: 80px;
            border: 0px solid greenyellow;
            background: rgb(203, 207, 255);
        }
        input.inputbe{
            width: 15%;
        }
        input.inputbe2{
            width: 20%;
        }
        input.inputvua{
            width: 80px;
        }
        #showgiamua{
            padding:15px;
            border:1px solid green;
        }
        table{
            width: 100%;
            border: 1px solid white;
        }
        table tr td.head{
            font-size:11px;
            font-weight: bold;
        }
        table .showgia{
            font-size:20px;
            font-weight: bold;
            min-height:30px;
        }
        table.giaban tr td{
            border:1px solid rgb(75, 75, 75);
            width:25%;
            color: #31ff31;
        }
        table.giaban.catlo tr td{
            color: #da9fff;

        }
        table tr td.middle{
            text-align: center;
        }
        table tr td.end{
            text-align: right;
        }
        .textbold{
            font-weight: bold;
            font-size: 13px;
        }
        .headline{
            font-weight: bold;
            font-size: 13px;
        }
        .red{
            background: #dd0808;
        }
        .green{
            background: #007605;
        }
        .holdethprice{
            display: flex;
            width: 100%;
            min-height: 50px;
            justify-content: center;
        }
        .dukien{
            font-size: 20px;
            color: #fb7bff;
        }
        #ethprice{
            font-weight: bold;
            font-size: 25px;
            text-align: center;
            padding:10px;
            display: inline-block;
        }
        #giamuonban{
            display: none;
        }
        #giamuonban2{
            width: 80px;
            padding: 5px;
            margin-top: 15px;
        }
        .sauheadtext{
            padding:10px 0;
        }
        .sau2{
            flex: 1;
align-self: center;
text-align: right;
        }
        #livecal tr td, #livecal2 tr td{
            width: 30%;
        }
        #crypto{
            align-self: flex-end;
            flex: 1;
            width: 50%;
        }
        .tdhead{
            text-align: center;
            padding: 10px;
            font-size: 20px;
            font-weight: bold;
            border-top: 1px solid white;
        }
        .buysellvl{
            border:1px solid white;
            display: flex;
            margin: 40px 0 0 0;
            min-width: 100%;
        }
        .buysellqty{
            border:1px solid white;
            display: flex;
            margin: 40px 0 40px 0;
            min-width: 100%;
            height:46px;
        }
        #sellvl, #buyvl,#buyqty,#sellqty{
            padding:10px;
            font-weight: bold;
            color: white;
         padding: 0;

        }
        #topline{
            position: absolute;
            top:-30px;
            font-weight: bold;
            font-size: 20px;
        }
        #buyvl,#buyqty{
        }
        #sellvl,#sellqty{
            text-align: right;
        }
        .smvl{
            float: right;
            padding-right: 10px;;
        }
        .smvlr{
            float: left;
            padding-left: 10px;
        }
        .spsm{
            font-size: 9px;
        }
        #bytsellline{
            position: relative;
        }
        .middleline{
            border-left: 1px solid white;
        }
        #toplinevl,#toplineqty{
            position: absolute;
            top: -30px;
            font-weight: bold;
            font-size: 20px;
            width: 70px;
            left: calc(50% - 15px);
        }
        .holdtanggiam{
            display: flex;
        width: 100%;
        margin-bottom: 20px;
        border-bottom: 1px solid white;
        border-left: 1px solid white;
        border-right: 1px solid white;
}
        
        #tanglen,#giamdi{
            width: 100%;
            font-weight: bold;
            font-size: 150%;
            padding: 0 10px 0 10px;
    -moz-box-sizing: border-box; 
    box-sizing: border-box;
        }
        #giamdi{
            text-align: left;
        }
        #tanglen{
            text-align: right;
        }
        .tanglentiep{
            background: blue !important;
        }
        .giamditiep{
            background-color: blue !important;       
 }
        .tanglen{
            text-align: right;
            background: green;
        }
        .giamdi{
            background: red;
        }
      .greenside{
        width: 100%;
background: green;
display: block;
padding-left: 10px;
    -moz-box-sizing: border-box; 
    box-sizing: border-box;
      }
      .redside{
        width: 100%;
background: red;
display: block;
padding-right: 10px;
    -moz-box-sizing: border-box; 
    box-sizing: border-box;
      }
      #loinhuangiamuonbanvnd,#loinhuangiamuonbanphantram{
        font-size: 25px;;
      }
      #averan{
          font-weight: bold;
          font-size: 16px;
      }
      .btnreset{
        width: 50px;
height: 20px;
background: #0408dd;
border: 1px solid white;
color: white;
font-weight: bold;
      }
    </style>
</head>

<body>

    <div class="header"><div id="fire">BINANCE STOCK TRADE</div> <button class="btnreset" id="reset" onclick="resetnote()">RESET</button></div>
    <div class="headtext">
        <div class="sau1">
            Assets <input type="number" class="inputvua" id="taisandangco" value="100">

        </div>
        <div class="sau2">
            Bought Price <input type="number" class="inputgia" id="giamua">
            

        </div>

    </div>

</div>
      <div class="holdethprice">
        <form id="crypto">
            <label for="cars">Crypto:</label>
            
            <select name="crypto" onchange="cryptochange(this)" id="cryptolist">
              <option value="btc" selected="">BTC/USDT</option>
              <option value="eth" selected="">ETH/USDT</option>
              <option value="mana" selected="">LRC/USDT</option>
              <option value="sand" selected="">SOL/USDT</option>
            </select>
          </form>
          
          <div id="ethprice"></div>
    </div>
    <table id="livecal">
    <tr>
        <td class="head">Value</td>
       <td class="head middle">Profit %</td>
       <td class="head end">Profit $</td>
    </tr>
    <tr>
        <td><div id="chenhlechgiaban" class="showgia"></div></td>
        <td class="middle"><div id="loinhuangiamuonbanphantram" class="showgia"></div></td>
        <td class="end"><div id="loinhuangiamuonban" class="showgia"></div></td>
      
    </tr>
  
    <tr>
        <td class="head">Total</td>
        <td class="head middle">Profit VND</td>
        <td class="head end">Total VND</td>
        </tr>
        <tr>
            <td><div id="tongtaisansaumuonban" class="showgia"></div></td>
            <td class="middle"><div id="loinhuangiamuonbanvnd" class="showgia"></div></td>
            <td class="end"><div id="tongtaisansaumuonbanvnd" class="showgia"></div></td>       
    </tr>
    </table>
    
         <input id="giamuonban" type="number" value="1" class="giamuonban">

         
                <div class="buysellvl">
                    <div id="buyvl"><span id="buynote" class="greenside" value="0"></span></div>
                    <div id="bytsellline"><div id="toplinevl">0%</div></div>
                    <div class="middleline"></div>
                    <div id="sellvl"><span id="sellnote" class="redside" value="0"></span></div>
                </div>
                
                <div class="buysellqty">
                    <div id="buyqty"><span id="bqty" class="greenside"></span><div id="tanglen"></div></div>
                    <div id="bytsellline"><div id="toplineqty">0%</div></div>
                    <div class="middleline"></div>
                    <div id="sellqty"><span id="sqty" class="redside"></span><div id="giamdi"></div></div>
                </div>
               
         <table id="averan">
             <tr>
                 <td style="border-bottom: 1px solid green;text-align: center;"><b><div id="trungbinhmuavao"></div></b></td>
                 <td style="border-bottom: 1px solid red;text-align: center;"><b><div id="trungbinhbanra"></div></b></td>
                </tr>
                <tr>
                 <td>
                    <ul>
                        <li><span class="dukien" id="dukien"></span></li>
                        <li><span id="doimuatakeprofit"></span> - Buyer TP</li>
                        <li><span id="doimuastoploss"></span> - Buyer SL</li>
                    </ul>
                 </td>
                 <td>
                    
                    <ul>
                        <li><span id="doibanmuonmua"></span>  - Seller BUY</li>
                        <li><span id="doibantakeprofit"></span>  - Seller TP</li>
                        <li><span id="doibanstoploss"></span>  - Seller SL</li>
                    </ul>
                </td>
             </tr>
         </table>
                <div class="fastperdict">
                    <div id="doibanchotlai"></div>
                    <div id="doibanstoploss"></div>
                </div>

    <table>
      
        <tr style="text-align: center;">
            <td>
    <span class="textbold"></span><input type="number" class="inputvua" id="tigia" value="22680"><small> Sell Fee </small> <input id="phigiamuonban" type="number" value="0.1" class="inputbe">
    <small> Buy Fee </small> <input id="phimuavao" class="inputbe" type="number" value="0.1"></td>
        </td>
    </tr>
    <tr>
        <td class="tdhead">
            ORDER CALCULATOR
        </td>
    </tr>
    
    <tr>
            <td><span class="textbold">TAKE PROFIT  </span><input id="dutinhban" type="number" value="1" class="inputbe2"> Stop Loss <input id="dutinhcatlo" type="number" value="0.8" class="inputbe2">
        </td>
            </tr>
        <tr>
            <td>
                <table class="giaban">
                    <tr>
                        <td class="head">PRICE</td>
                        <td class="head middle">ASSET</td>
                        <td class="head middle">PROFIT $</td>
                        <td class="head end">PROFIT VNĐ</td>
                    </tr>
                    <tr>
                        <td><div id="giadutinhban" class="showgia"></div></td>
                        <td class="middle"><div id="trigiasauban" class="showgia"></div></td>
                        <td class="middle"><div id="loinhuansauban" class="showgia"></div></td>
                        <td class="end"><div id="loinhuanvnd" class="showgia"></div></td>
    
                    </tr>
                </table>
                
    
            </td>
            </tr>
            <tr>
                <td class="headline">STOP LOSS</td>
            </tr>
            <tr>
                <td>
                    <table class="giaban catlo">
                        <tr>
                            <td class="head">PRICE</td>
                            <td class="head middle">ASSET</td>
                            <td class="head middle">LOSS $</td>
                            <td class="head end">LOSS VNĐ</td>
                        </tr>
                       <tr>
                        <td><div id="giacatlo" class="showgia"></div></td>
                        <td class="middle"><div id="trigiasaucatlo" class="showgia"></div></td>
                        <td class="middle"><div id="thiethai" class="showgia"></div></td>
                        <td class="end"><div id="thiethaivnd" class="showgia"></div></td>
                       </tr>
                    </table>
                </td>
    
        </tr>
    </table>
  

</div>





    <input id="giamuonban2" type="number" value="1" class="giamuonban"> <b>SELL CALCULATOR</b>


    <table id="livecal2">
        <tr>
            <td class="head">Value</td>
           <td class="head middle">Profit %</td>
           <td class="head end">Profit $</td>
        </tr>
        <tr>
            <td><div id="chenhlechgiaban2" class="showgia"></div></td>
            <td class="middle"><div id="loinhuangiamuonbanphantram2" class="showgia"></div></td>
            <td class="end"><div id="loinhuangiamuonban2" class="showgia"></div></td>
          
        </tr>
      
        <tr>
            <td class="head">Total</td>
            <td class="head middle">Profit VND</td>
            <td class="head end">Total VND</td>
            </tr>
            <tr>
                <td><div id="tongtaisansaumuonban2" class="showgia"></div></td>
                <td class="middle"><div id="loinhuangiamuonbanvnd2" class="showgia"></div></td>
                <td class="end"><div id="tongtaisansaumuonbanvnd2" class="showgia"></div></td>       
        </tr>
        </table>
        
    
    
    <script>
       function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

 
    function dutinhban(){
                     //gia du tinh ban ra
        var taisan = document.getElementById("taisandangco").valueAsNumber;   
        var tigia = document.getElementById("tigia").valueAsNumber;   
        var phigiamuonban = document.getElementById("phigiamuonban").valueAsNumber;   
        var phimuavao = document.getElementById("phimuavao").valueAsNumber;   
        var giamua = document.getElementById("giamua").valueAsNumber;        
        var dtbrval = document.getElementById("dutinhban").valueAsNumber;

        var dtbr = giamua + (giamua * (dtbrval+phigiamuonban+phimuavao)/100);
        document.getElementById('giadutinhban').innerHTML = dtbr.toFixed(3);
    
        var trigiasauban = taisan + (taisan * dtbrval/100) - (taisan *phigiamuonban/100) - (taisan *phimuavao/100);
        document.getElementById('trigiasauban').innerHTML = trigiasauban.toFixed(3);
        var loinhuansauban = trigiasauban - taisan;
        document.getElementById('loinhuansauban').innerHTML = loinhuansauban.toFixed(3);
        var loinhuanvnd = loinhuansauban * tigia;
        document.getElementById('loinhuanvnd').innerHTML = numberWithCommas(loinhuanvnd.toFixed());
                      // gia du tinh cat lo
        var dtclval = document.getElementById("dutinhcatlo").valueAsNumber;
        var dtcl = giamua + (giamua * -(dtclval+phigiamuonban+phimuavao)/100);
        document.getElementById('giacatlo').innerHTML = dtcl.toFixed(3);
    
        var trigiasaucatlo = taisan - (taisan * dtclval/100) - (taisan * phigiamuonban/100) - (taisan *phimuavao/100);
        document.getElementById('trigiasaucatlo').innerHTML = trigiasaucatlo.toFixed(3);
        var thiethai = taisan - trigiasaucatlo;
        document.getElementById('thiethai').innerHTML = thiethai.toFixed(3);
        var thiethaivnd = thiethai * tigia;
        document.getElementById('thiethaivnd').innerHTML = numberWithCommas(thiethaivnd.toFixed());
        let listid = document.getElementById('cryptolist');
        let currenttemplate = listid.options[ listid.selectedIndex ].value;

            if (currenttemplate === 'btc'){
                setCookie('taisanbtc', taisan , '365');
                setCookie('giamuabtc', giamua , '365');
                setCookie('dutinhbanbtc', dtbrval , '365');
                setCookie('dutinhbanbtc', dtclval , '365');
            }
            if (currenttemplate === 'eth'){
                setCookie('taisaneth', taisan , '365');
                setCookie('giamuaeth', giamua , '365');
                setCookie('dutinhbaneth', dtbrval , '365');
                setCookie('dutinhcatloeth', dtclval , '365');          
              }
            if (currenttemplate === 'mana'){
                setCookie('taisanmana', taisan , '365');
                setCookie('giamuamana', giamua , '365');
                setCookie('dutinhbanmana', dtbrval , '365');
                setCookie('dutinhcatlomana', dtclval , '365');           
             }
            if (currenttemplate === 'sand'){
                setCookie('taisansand', taisan , '365');
                setCookie('giamuasand', giamua , '365');
                setCookie('dutinhbansand', dtbrval , '365');
                setCookie('dutinhcatlosand', dtclval , '365');        
                };
                                setCookie('tigia', tigia , '365');
                                setCookie('phigiamuonban', phigiamuonban , '365');
                                setCookie('phimuavao', phimuavao , '365');
    
    }
  
    function livecal(){
        
        var dutinhban = document.getElementById("dutinhban").valueAsNumber;   

        var taisan = document.getElementById("taisandangco").valueAsNumber;   
        var giamua = document.getElementById("giamua").valueAsNumber;
        var tigia = document.getElementById("tigia").valueAsNumber;   
        var phimuavao = document.getElementById("phimuavao").valueAsNumber;   


        var giamuonban = document.getElementById("giamuonban").valueAsNumber;
        var phigiamuonban = document.getElementById("phigiamuonban").valueAsNumber;
        
        var chenhlechgiaban = giamuonban - giamua;
        document.getElementById('chenhlechgiaban').innerHTML = chenhlechgiaban.toFixed(2);
        var loinhuangiamuonbanphantram = (chenhlechgiaban/giamua) * 100 - (phigiamuonban + phimuavao);
        if (loinhuangiamuonbanphantram > 0){
            document.getElementById("livecal").className = "green";
        }
        //if (loinhuangiamuonbanphantram > dutinhban ){
           //var audio = new Audio('https://sounds-mp3.com/mp3/0003927.mp3');
            //audio.play();
        //}
        if (loinhuangiamuonbanphantram < 0){
            document.getElementById("livecal").className = "red";
        }
        //if (loinhuangiamuonbanphantram < dutinhcatlo){
          //  var audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-kids-cartoon-close-bells-2256.mp3');
            // audio.play();
        //}



        document.getElementById('loinhuangiamuonbanphantram').innerHTML = loinhuangiamuonbanphantram.toFixed(2) + '<span class="spsm">%</span>';
        var loinhuangiamuonban = taisan * loinhuangiamuonbanphantram/100;
        document.getElementById('loinhuangiamuonban').innerHTML = loinhuangiamuonban.toFixed(2);
        var loinhuangiamuonbanvnd = loinhuangiamuonban * tigia;
        document.getElementById('loinhuangiamuonbanvnd').innerHTML = numberWithCommas(loinhuangiamuonbanvnd.toFixed());
        var tongtaisansaumuonban = taisan + loinhuangiamuonban;
        document.title =loinhuangiamuonban.toFixed(2) + " | " + numberWithCommas(loinhuangiamuonbanvnd.toFixed()) + " đ | DHCAL";

        document.getElementById('tongtaisansaumuonban').innerHTML = tongtaisansaumuonban.toFixed(2);
        var tongtaisansaumuonbanvnd = tongtaisansaumuonban * tigia;
        document.getElementById('tongtaisansaumuonbanvnd').innerHTML = numberWithCommas(tongtaisansaumuonbanvnd.toFixed());

       
        
    }
    
    function nhapban(){

    var taisan = document.getElementById("taisandangco").valueAsNumber;   
    var giamua = document.getElementById("giamua").valueAsNumber;
    var tigia = document.getElementById("tigia").valueAsNumber;   
    var phimuavao = document.getElementById("phimuavao").valueAsNumber;   

    var giamuonban = document.getElementById("giamuonban2").valueAsNumber;
    var phigiamuonban = document.getElementById("phigiamuonban").valueAsNumber;
    var chenhlechgiaban = giamuonban - giamua;
    document.getElementById('chenhlechgiaban2').innerHTML = chenhlechgiaban.toFixed(2);
    var loinhuangiamuonbanphantram = (chenhlechgiaban/giamua) * 100 - (phigiamuonban + phimuavao);
        if (loinhuangiamuonbanphantram > 0){
            document.getElementById("livecal2").className = "green";
        }
        if (loinhuangiamuonbanphantram < 0){
            document.getElementById("livecal2").className = "red";
        }


document.getElementById('loinhuangiamuonbanphantram2').innerHTML = loinhuangiamuonbanphantram.toFixed(2) + '<span class="percent">%</span>';
    var loinhuangiamuonban = taisan * loinhuangiamuonbanphantram/100;
document.getElementById('loinhuangiamuonban2').innerHTML = loinhuangiamuonban.toFixed(2);
    var loinhuangiamuonbanvnd = loinhuangiamuonban * tigia;
document.getElementById('loinhuangiamuonbanvnd2').innerHTML = numberWithCommas(loinhuangiamuonbanvnd.toFixed());
    var tongtaisansaumuonban = taisan + loinhuangiamuonban;
document.getElementById('tongtaisansaumuonban2').innerHTML = tongtaisansaumuonban.toFixed(2);
    var tongtaisansaumuonbanvnd = tongtaisansaumuonban * tigia;
document.getElementById('tongtaisansaumuonbanvnd2').innerHTML = numberWithCommas(tongtaisansaumuonbanvnd.toFixed());

}

        
        
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  let expires = "expires="+d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let ca = document.cookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
};

function checktemplate(){
    let cryptotext = getCookie('wstext');
    let cryptotextid = document.getElementById('cryptolist');
    
    let tigiac = getCookie("tigia");
    let dutinhbanc = getCookie("dutinhban");
    let dutinhcatloc = getCookie("dutinhcatlo");
    let phimuavaoc = getCookie("phimuavao");
    let phigiamuonbanc = getCookie("phigiamuonban");

    let giamuabtc = getCookie("giamuabtc");
    let giamuaeth = getCookie("giamuaeth");
    let giamuamana = getCookie("giamuamana");
    let giamuasand = getCookie("giamuasand");

    let taisanbtc = getCookie("taisanbtc");
    let taisaneth = getCookie("taisaneth");
    let taisanmana = getCookie("taisanmana");
    let taisansand = getCookie("taisansand");

    let dutinhbanbtc = getCookie("dutinhbanbtc");
    let dutinhbaneth = getCookie("dutinhbaneth");
    let dutinhbanmana = getCookie("dutinhbanmana");
    let dutinhbansand = getCookie("dutinhbansand");

    let dutinhcatlobtc = getCookie("dutinhcatlobtc");
    let dutinhcatloeth = getCookie("dutinhcatloeth");
    let dutinhcatlomana = getCookie("dutinhcatlomana");
    let dutinhcatlosand = getCookie("dutinhcatlosand");


  if (tigiac != ""){document.getElementById("tigia").value = tigiac;} else {document.getElementById("tigia").value = "22480";}
  if (phimuavaoc != ""){document.getElementById("phimuavao").value = phimuavaoc;} else {document.getElementById("phimuavao").value = "0.1";}
  if (phigiamuonbanc != ""){document.getElementById("phigiamuonban").value = phigiamuonbanc;} else {document.getElementById("phigiamuonban").value = "0.1";}
    
        if (cryptotext == '0'){
            cryptotextid.selectedIndex = cryptotext;
            fire.innerHTML = 'BTC/USDT STOCK';
            if (taisanbtc != ""){document.getElementById("taisandangco").value = taisanbtc;} else {document.getElementById("taisandangco").value = "0";}
            if (giamuabtc != ""){document.getElementById("giamua").value = giamuabtc;} else {document.getElementById("giamua").value = "0";}
            if (dutinhbanbtc != ""){document.getElementById("dutinhban").value = dutinhbanbtc;} else {document.getElementById("dutinhban").value = "1";}
            if (dutinhcatlobtc != ""){document.getElementById("dutinhcatlo").value = dutinhcatlobtc;} else {document.getElementById("dutinhcatlo").value = "0.7";}

            console.log('BTC TEMPLATE - TOTAL: ' + taisanbtc + ' BOUGHT PRICE: ' + giamuabtc);

        }
        if (cryptotext == '1'){
            cryptotextid.selectedIndex = cryptotext;
            fire.innerHTML = 'ETH/USDT STOCK';
            if (taisaneth != ""){document.getElementById("taisandangco").value = taisaneth;} else {document.getElementById("taisandangco").value = "0";}
            if (giamuaeth != ""){document.getElementById("giamua").value = giamuaeth;} else {document.getElementById("giamua").value = "0";}
            if (dutinhbaneth != ""){document.getElementById("dutinhban").value = dutinhbaneth;} else {document.getElementById("dutinhban").value = "1";}
            if (dutinhcatloeth != ""){document.getElementById("dutinhcatlo").value = dutinhcatloeth;} else {document.getElementById("dutinhcatlo").value = "0.7";}

            console.log('ETH TEMPLATE - TOTAL: ' + taisaneth + ' BOUGHT PRICE: ' + giamuaeth);

        }
        if (cryptotext == '2'){
           cryptotextid.selectedIndex = cryptotext;
            fire.innerHTML = 'LRC/USDT STOCK';
            if (taisanmana != ""){document.getElementById("taisandangco").value = taisanmana;} else {document.getElementById("taisandangco").value = "0";}
            if (giamuamana != ""){document.getElementById("giamua").value = giamuamana;} else {document.getElementById("giamua").value = "0";}
            if (dutinhbanmana != ""){document.getElementById("dutinhban").value = dutinhbanmana;} else {document.getElementById("dutinhban").value = "1";}
            if (dutinhcatlomana != ""){document.getElementById("dutinhcatlo").value = dutinhcatlomana;} else {document.getElementById("dutinhcatlo").value = "0.7";}

            console.log('LRC TEMPLATE - TOTAL: ' + taisanmana + ' BOUGHT PRICE: ' + giamuamana);


        }
        if (cryptotext == '3'){
            cryptotextid.selectedIndex = cryptotext;
            fire.innerHTML = 'SOL/USDT STOCK';
            if (taisansand != ""){document.getElementById("taisandangco").value = taisansand;} else {document.getElementById("taisandangco").value = "0";}
            if (giamuasand != ""){document.getElementById("giamua").value = giamuasand;} else {document.getElementById("giamua").value = "0";}
            if (dutinhbansand != ""){document.getElementById("dutinhban").value = dutinhbansand;} else {document.getElementById("dutinhban").value = "1";}
            if (dutinhcatlosand != ""){document.getElementById("dutinhcatlo").value = dutinhcatlosand;} else {document.getElementById("dutinhcatlo").value = "0.7";}

            console.log('SOL USDT TEMPLATE - TOTAL: ' + taisansand + ' BOUGHT PRICE: ' + giamuasand);


        }if (cryptotext === 'undefined') {
        cryptotextid.selectedIndex = 0;
        fire.innerHTML = 'BTC/USDT STOCK';
        console.log('set as default' + cryptotext);


            }
}
document.addEventListener("DOMContentLoaded", function(event) { 
    let fire = document.getElementById("fire");
    let cryptocheck = getCookie("ws");
    if (cryptocheck != ""){startgame(cryptocheck);} else {startgame("wss://stream.binance.com:9443/ws/btcusdt@trade")};
    checktemplate();
});


    let buyvolume = document.getElementById("buyvolume"); /// if input sotien
    document.getElementById("giamua").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("giamua").addEventListener("input", resetnote); /// if input sotien

    document.getElementById("taisandangco").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("tigia").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("phigiamuonban").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("phimuavao").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("dutinhcatlo").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("dutinhban").addEventListener("input", dutinhban); /// if input sotien
    document.getElementById("giamuonban2").addEventListener("input", nhapban); /// if GIA MUON BAN



    function cryptochange() {
        var cryptvalue = document.getElementById("cryptolist").value;
        if (cryptvalue === "btc"){
            let ws = "wss://stream.binance.com:9443/ws/btcusdt@trade";
            setCookie('wstext', '0' , '365');
            setCookie('ws', ws , '365');
            console.log('Websocket change: ' + getCookie('ws'));
            console.log('Websocket change: ' + getCookie('wstext'));

            location.reload();            
        }
        if (cryptvalue === "eth"){
            let ws = "wss://stream.binance.com:9443/ws/ethusdt@trade";
            setCookie('ws', ws , '365');
            setCookie('wstext', '1' , '365');
            console.log('Websocket change: ' + getCookie('ws'));
            console.log('Websocket change: ' + getCookie('wstext'));

            location.reload();        } 
        if (cryptvalue === "mana"){
            let ws = "wss://stream.binance.com:9443/ws/lrcusdt@trade";
            setCookie('ws', ws , '365');
            setCookie('wstext', '2' , '365');
            console.log('Websocket change: ' + getCookie('ws'));
            console.log('Websocket change: ' + getCookie('wstext'));

            location.reload();
        }
        if (cryptvalue === "sand"){
            let ws = "wss://stream.binance.com:9443/ws/solusdt@trade";
            setCookie('ws', ws , '365');
            setCookie('wstext', '3' , '365');
            console.log('Websocket change: ' + getCookie('ws'));
            console.log('Websocket change: ' + getCookie('wstext'));

            location.reload();
        }
    }
function resetnote(){
    buy = 0;
    sell = 0;
    bqty = 0;
    sqty = 0;
    prbvl = 0;
    prsvl = 0;
}
    var bqty = 0;
    var sqty = 0;
    var buy = 0;
    var sell = 0;
    var prbvl = 0;
    var prsvl = 0;
    var bvlcuoi = 0;
    var muonbanphantram = document.getElementById("dutinhban").valueAsNumber;
    var muonstoploss = document.getElementById("dutinhcatlo").valueAsNumber;
    var phigiamua = document.getElementById("phigiamuonban").valueAsNumber;
    var phigiaban = document.getElementById("phimuavao").valueAsNumber;
    let tangmenolen = document.getElementById("tanglen");
    let giammenodi = document.getElementById("giamdi");
    function note(tinhtrang,qty,price){
        if (tinhtrang === '0'){ //0 = MUA VAO
            buy++;
            totalvl = buy/(buy + sell)*100;
            sellvl = 100 - totalvl;
            document.getElementById("buynote").innerHTML = buy + '<span class="smvl">' + totalvl.toFixed(2) +' <span class="spsm">%</span></span>';
            document.getElementById("buyvl").style.width = totalvl +'%';    
            document.getElementById("sellvl").style.width = sellvl +'%';   
            bvlcuoi = bqty/(bqty+sqty)*100;
            bqty += Number(qty);
            percentbqty = bqty/(bqty+sqty)*100;
            percentsqty = 100 - percentbqty;
            tangthem = percentbqty - bvlcuoi;
            
            
            document.getElementById("tanglen").innerHTML = '+' + tangthem.toFixed(3);
            if(tangmenolen.classList.contains('tanglen')){
                tangmenolen.classList.add("tanglentiep");
            }else{
                tangmenolen.classList.add("tanglen");
                giammenodi.classList.remove("giamdi");
                giammenodi.classList.remove("giamditiep");
            }
          


            document.getElementById("toplinevl").innerHTML = (totalvl - sellvl).toFixed(2) +' <span class="spsm">%</span></span>';

            document.getElementById("bqty").innerHTML = bqty.toFixed(2) + '<span class="smvl">' + percentbqty.toFixed(2) +' <span class="spsm">%</span></span>';
            document.getElementById("buyqty").style.width = percentbqty +'%';    
            document.getElementById("sellqty").style.width = percentsqty +'%';  
            
            prbvl += Number(price);
            trungbinhgia = prbvl/buy;
            giahomuonban = trungbinhgia + (trungbinhgia*(muonbanphantram + phigiaban + phigiamua )/100);
            giahomuonstoploss = trungbinhgia - (trungbinhgia*(muonstoploss + phigiaban + phigiamua)/100);
            document.getElementById("trungbinhmuavao").innerHTML = trungbinhgia.toFixed(4);
           
            trungbinhgiaban = prsvl/sell;
            var dukien = (trungbinhgia + trungbinhgiaban)/2;
            document.getElementById("dukien").innerHTML =  Number(dukien).toFixed(4);;

            document.getElementById("doimuatakeprofit").innerHTML = giahomuonban.toFixed(3);
            document.getElementById("doimuastoploss").innerHTML = giahomuonstoploss.toFixed(3);

        }       
        if (tinhtrang === '1'){ //1 = BAN RA
            sell++;
            totalvls = buy/(buy + sell)*100;
            buyvl = 100 - totalvls;
            document.getElementById("sellnote").innerHTML = '<span class="smvlr">' + buyvl.toFixed(2) + ' <span class="spsm">%</span></span>' + sell;
            document.getElementById("buyvl").style.width = totalvls +'%';    
            document.getElementById("sellvl").style.width = buyvl +'%';  
            document.getElementById("toplinevl").innerHTML = (totalvls - buyvl).toFixed(2) +' <span class="spsm">%</span></span>';

            sellvlcuoi = bqty/(bqty + sqty)*100;

            sqty += Number(qty);
            spercentbqty = bqty/(bqty + sqty)*100;
            spercentsqty = 100 - spercentbqty;


            giamdi = spercentbqty - sellvlcuoi;
            


            if(giammenodi.classList.contains('giamdi')){
                giammenodi.classList.add("giamditiep");
            }else{
                giammenodi.classList.add("giamdi");
                tangmenolen.classList.remove("tanglen");
                tangmenolen.classList.remove("tanglentiep");
            }
            document.getElementById("giamdi").innerHTML = giamdi.toFixed(3);
        
    

            document.getElementById("toplineqty").innerHTML = (spercentbqty - spercentsqty).toFixed(2) +' <span class="spsm">%</span></span>';
       
            document.getElementById("sqty").innerHTML = '<span class="smvlr">' + spercentsqty.toFixed(2) + ' <span class="spsm">%</span></span>' + sqty.toFixed(2);

            document.getElementById("buyqty").style.width = spercentbqty +'%';    
            document.getElementById("sellqty").style.width = spercentsqty +'%';  
              
            prsvl += Number(price);
            trungbinhgiasell = prsvl/sell;
            giahodutinhmua = trungbinhgiasell - (trungbinhgiasell*(muonbanphantram + phigiaban + phigiamua)/100);
            doibantakeprofit = giahodutinhmua + (trungbinhgiasell*(muonbanphantram + phigiaban + phigiamua)/100);
            doibanstoploss = giahodutinhmua - (trungbinhgiasell*(muonstoploss+ phigiaban + phigiamua)/100);
           

            trungbinhgiamua = prbvl/buy;
            dukien2 = (trungbinhgiamua + trungbinhgiasell)/2;
            document.getElementById("dukien").innerHTML = Number(dukien2).toFixed(4);


            document.getElementById("trungbinhbanra").innerHTML = trungbinhgiasell.toFixed(4);

            document.getElementById("doibanmuonmua").innerHTML = giahodutinhmua.toFixed(3);
            document.getElementById("doibantakeprofit").innerHTML = doibantakeprofit.toFixed(3);   
            document.getElementById("doibanstoploss").innerHTML = doibanstoploss.toFixed(3);     
 }
        
    
} 
    </script>


<script>

  function startgame(ws) {     
      if(ws === 'stop'){
          return false;
      }else{
        let wsad = new WebSocket(ws);
    let etherprice = document.getElementById("ethprice");
    let giamuonban = document.getElementById("giamuonban");
    let lastPrice = null;
    if (ws === 'wss://stream.binance.com:9443/ws/btcusdt@trade'){
        wsad.onmessage = (event) => {
                let stockObject = JSON.parse(event.data);
                let ethval = stockObject.p;
                let price = parseFloat(ethval).toFixed(2);

                let quantity = stockObject.q;
                etherprice.innerHTML = price;   
                if (price > lastPrice){
                    etherprice.className = "green";
                    note('0',quantity, price);
                }
                if (price < lastPrice){
                    etherprice.className = "red";
                    note('1', quantity, price);
                }
                lastPrice = price;
                giamuonban.value = ethval;
                livecal();
            }
    }
    if (ws === 'wss://stream.binance.com:9443/ws/ethusdt@trade'){
        wsad.onmessage = (event) => {
                let stockObject = JSON.parse(event.data);
                let ethval = stockObject.p;
                let price = parseFloat(ethval).toFixed(2);
                let quantity = stockObject.q;

                etherprice.innerHTML = price;   
                if (price > lastPrice){
                    etherprice.className = "green";
                    note('0', quantity, price);

                }
                if (price < lastPrice){
                    etherprice.className = "red";
                    note('1', quantity, price);
                }
                lastPrice = price;

                giamuonban.value = ethval;
                livecal();
            }
    }
    if (ws === 'wss://stream.binance.com:9443/ws/lrcusdt@trade'){
        wsad.onmessage = (event) => {
                let stockObject = JSON.parse(event.data);
                let ethval = stockObject.p;
                let price = parseFloat(ethval).toFixed(4);
                let quantity = stockObject.q;

                etherprice.innerHTML = price;   
                if (price > lastPrice){
                    etherprice.className = "green";
                    note('0', quantity, price);

                }
                if (price < lastPrice){
                    etherprice.className = "red";
                    note('1', quantity, price);
                }
                lastPrice = price;

                giamuonban.value = ethval;
                livecal();
            }
    }
    if (ws === 'wss://stream.binance.com:9443/ws/solusdt@trade'){
        wsad.onmessage = (event) => {
                let stockObject = JSON.parse(event.data);
                let ethval = stockObject.p;
                let price = parseFloat(ethval).toFixed(4);
                let quantity = stockObject.q;

                etherprice.innerHTML = price;   
                if (price > lastPrice){
                    etherprice.className = "green";
                    note('0', quantity, price);

                }
                if (price < lastPrice){
                    etherprice.className = "red";
                    note('1', quantity, price);
                }
                lastPrice = price;

                giamuonban.value = ethval;
                livecal();
            }
          }
           
     }
 }
  
</script>
</body>
</html>
